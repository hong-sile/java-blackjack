package blackjack.domain;

import java.util.List;
import java.util.Map;

public class BlackJackGame {

    private final Deck deck;
    private final Users users;

    public BlackJackGame(final List<String> playerNames, final DeckGenerator deckGenerator) {
        this.deck = new Deck(deckGenerator);
        this.users = new Users(playerNames, deck);
    }

    public Map<String, List<Card>> getStatus() {
        return users.getStatus();
    }

    public Map<String, List<Card>> getInitialStatus() {
        return users.getInitialStatus();
    }

    public List<String> getPlayerNames() {
        return users.getPlayerNames();
    }

    public boolean isBust(final String name) {
        return BlackJackRule.isBust(users.getUser(name));
    }

    public int playDealerTurn() {
        int drawCount = 0;
        while (!users.isDealerOverDrawLimit()) {
            users.drawDealer(deck);
            drawCount++;
        }
        return drawCount;
    }
}
